!function(t){"function"==typeof define&&define.amd?define(["jquery"],t):t(jQuery)}(function($){function t(t){return t}function e(t){return decodeURIComponent(t.replace(n," "))}function i(t){0===t.indexOf('"')&&(t=t.slice(1,-1).replace(/\\"/g,'"').replace(/\\\\/g,"\\"));try{return o.json?JSON.parse(t):t}catch(t){}}var n=/\+/g,o=$.cookie=function(n,a,s){if(void 0!==a){if(s=$.extend({},o.defaults,s),"number"==typeof s.expires){var r=s.expires,l=s.expires=new Date;l.setDate(l.getDate()+r)}return a=o.json?JSON.stringify(a):String(a),document.cookie=[o.raw?n:encodeURIComponent(n),"=",o.raw?a:encodeURIComponent(a),s.expires?"; expires="+s.expires.toUTCString():"",s.path?"; path="+s.path:"",s.domain?"; domain="+s.domain:"",s.secure?"; secure":""].join("")}for(var c=o.raw?t:e,p=document.cookie.split("; "),f=n?void 0:{},d=0,h=p.length;d<h;d++){var u=p[d].split("="),v=c(u.shift()),g=c(u.join("="));if(n&&n===v){f=i(g);break}n||(f[v]=i(g))}return f};o.defaults={},$.removeCookie=function(t,e){return void 0!==$.cookie(t)&&($.cookie(t,"",$.extend({},e,{expires:-1})),!0)}}),function($){"use strict";var t=function(t,e,i){return this.el=t,this.$el=$(t),this.options=e,this.uuid=this.$el.attr("id")?this.$el.attr("id"):i,this.state={},this.init(),this};t.prototype={init:function(){var t=this;t._load(),t.$el.find("ul").each(function(e){var i=$(this);i.attr("data-index",e),t.options.save&&t.state.hasOwnProperty(e)?(i.parent().addClass(t.options.openClass),i.show()):i.parent().hasClass(t.options.openClass)?(i.show(),t.state[e]=1):i.hide()});var e=$("<span></span>").prepend(t.options.caretHtml),i=t.$el.find("li > a");t._trigger(e,!1),t._trigger(i,!0),t.$el.find("li:has(ul) > a").prepend(e)},_trigger:function(t,e){var i=this;t.on("click",function(t){t.stopPropagation();var n=e?$(this).next():$(this).parent().next(),o=!1;if(e){var a=$(this).attr("href");o=void 0===a||""===a||"#"===a}if(n=n.length>0&&n,i.options.onClickBefore.call(this,t,n),!e||n&&o)t.preventDefault(),i._toggle(n,n.is(":hidden")),i._save();else if(i.options.accordion){var s=i.state=i._parents($(this));i.$el.find("ul").filter(":visible").each(function(){var t=$(this),e=t.attr("data-index");s.hasOwnProperty(e)||i._toggle(t,!1)}),i._save()}i.options.onClickAfter.call(this,t,n)})},_toggle:function(t,e){var i=this,n=t.attr("data-index"),o=t.parent();if(i.options.onToggleBefore.call(this,t,e),e){if(o.addClass(i.options.openClass),t.slideDown(i.options.slide),i.state[n]=1,i.options.accordion){var a=i.state=i._parents(t);a[n]=i.state[n]=1,i.$el.find("ul").filter(":visible").each(function(){var t=$(this),e=t.attr("data-index");a.hasOwnProperty(e)||i._toggle(t,!1)})}}else o.removeClass(i.options.openClass),t.slideUp(i.options.slide),i.state[n]=0;i.options.onToggleAfter.call(this,t,e)},_parents:function(t,e){var i={};return t.parent().parents("ul").each(function(){var t=$(this),n=t.attr("data-index");if(!n)return!1;i[n]=e?t:1}),i},_save:function(){if(this.options.save){var t={};for(var i in this.state)1===this.state[i]&&(t[i]=1);e[this.uuid]=this.state=t,$.cookie(this.options.cookie.name,JSON.stringify(e),this.options.cookie)}},_load:function(){if(this.options.save){if(null===e){var t=$.cookie(this.options.cookie.name);e=t?JSON.parse(t):{}}this.state=e.hasOwnProperty(this.uuid)?e[this.uuid]:{}}},toggle:function(t){var e=this,i=arguments.length;if(i<=1)e.$el.find("ul").each(function(){var i=$(this);e._toggle(i,t)});else{var n,o={},a=Array.prototype.slice.call(arguments,1);i--;for(var s=0;s<i;s++){n=a[s];var r=e.$el.find('ul[data-index="'+n+'"]').first();if(r&&(o[n]=r,t)){var l=e._parents(r,!0);for(var c in l)o.hasOwnProperty(c)||(o[c]=l[c])}}for(n in o)e._toggle(o[n],t)}e._save()},destroy:function(){$.removeData(this.$el),this.$el.find("li:has(ul) > a").unbind("click"),this.$el.find("li:has(ul) > a > span").unbind("click")}},$.fn.navgoco=function(e){if("string"==typeof e&&"_"!==e.charAt(0)&&"init"!==e)var i=!0,n=Array.prototype.slice.call(arguments,1);else e=$.extend({},$.fn.navgoco.defaults,e||{}),$.cookie||(e.save=!1);return this.each(function(o){var a=$(this),s=a.data("navgoco");s||(s=new t(this,i?$.fn.navgoco.defaults:e,o),a.data("navgoco",s)),i&&s[e].apply(s,n)})};var e=null;$.fn.navgoco.defaults={caretHtml:"",accordion:!1,openClass:"open",save:!0,cookie:{name:"navgoco",expires:!1,path:"/"},slide:{duration:400,easing:"swing"},onClickBefore:$.noop,onClickAfter:$.noop,onToggleBefore:$.noop,onToggleAfter:$.noop}}(jQuery);